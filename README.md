# 小说角色分析工具

## 项目概述
这是一个基于Ollama和qwen模型的小说文本分析工具，能够自动提取小说中的角色信息并生成详细的分析报告。该工具可以处理各种格式的小说文本，自动识别主要角色及其关系。

## 系统要求
- Python 3.8+
- Ollama服务运行中 配置阿里云通义千问模型 ollama pull qwen3:4b 
- 必要的Python依赖包：
  ```bash
  pip install requests
  ```

## 安装说明
1. 克隆或下载本项目
2. 安装Python依赖：
   ```bash
   pip install -r requirements.txt
   ```
3. 确保Ollama服务已启动并运行

## 使用方法
1. 运行批处理脚本：
   ```bash
   run_text_processor.bat
   ```
2. 按照交互式菜单操作：
   - 选择输入文件（默认：example_input.txt）
   - 指定输出文件（默认：output.txt）
   - 选择模型（默认：qwen:14b）
   - 设置处理参数（如章节分割方式等）

## 输入输出示例
### 输入文件示例
输入文件应为标准文本格式，支持章节标题（以"## "开头）：
```
## 第一章
这是一个关于人工智能的故事...
```

### 输出文件示例
输出文件包含角色分析结果：
```
主要角色:
1. 张三 (出现次数: 15)
   - 角色关系: 李四(朋友), 王五(对手)
2. 李四 (出现次数: 12)
   - 角色关系: 张三(朋友), 王五(同事)
```

## 注意事项
1. 确保输入文本格式正确，章节标题以"## "开头
2. 处理大型文本可能需要较长时间（约1-2分钟/万字）
3. 模型选择会影响分析结果质量：
   - qwen:14b 提供更准确的分析但需要更多资源
   - qwen:7b 适合快速分析但精度稍低
4. 建议在分析前对文本进行预处理，去除无关内容
5. 输出结果可能需要人工校对以提高准确性

## 常见问题
Q: 程序无法连接到Ollama服务怎么办？
A: 请确保Ollama服务已启动，并检查网络连接。

Q: 输出结果不准确怎么办？
A: 尝试以下方法：
1. 使用更高级的模型(qwen:14b)
2. 提供更清晰的文本输入
3. 调整章节分割参数

## 启动命令
```bash
python novel_analyzer.py -i input.txt -o report.txt
```
## 贡献指南
欢迎提交Pull Request改进本项目。主要开发文件为novel_analyzer.py。